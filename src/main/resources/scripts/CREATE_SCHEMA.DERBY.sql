-- ============================= CREACION DEL ESQUEMA DE LA BASE DE DATOS ====================
CREATE TABLE PRODUCTO (
	CODIGO			VARCHAR (64)	 NOT NULL ,
	NOMBRE			VARCHAR (255)	 NOT NULL ,
	LINEA			VARCHAR (255)	 NOT NULL ,
	MARCA			VARCHAR (255)	 NOT NULL ,	
	COSTO			DOUBLE	 NOT NULL ,
	PRECIO_VENTA	DOUBLE	 NOT NULL ,
	PRECIO_BASE		DOUBLE	 NOT NULL ,
	PIEZAS_POR_CAJA	INTEGER	 NOT NULL ,
	EXISTENCIA		INTEGER	 NOT NULL ,
	
	PRIMARY KEY (CODIGO)
);

-- ===============================================================================
CREATE TABLE VENTA (
	ID			INTEGER	 NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	FECHA		TIMESTAMP	 NOT NULL ,	
	PRIMARY KEY (ID)
);
-- ===============================================================================
CREATE TABLE VENTA_DETALLE (
	ID				INTEGER	 NOT NULL GENERATED BY DEFAULT AS IDENTITY ,
	VENTA_ID		INTEGER	 NOT NULL ,
	PRODUCTO_CODIGO	VARCHAR (64)	 NOT NULL,
	CANTIDAD		INTEGER	 NOT NULL ,
	PRECIO_VENTA	DOUBLE	 NOT NULL ,
	PRIMARY KEY (ID)
);

-- =================================== CONSTRAINTS ==============================
ALTER TABLE VENTA_DETALLE ADD FOREIGN KEY (PRODUCTO_CODIGO)	REFERENCES PRODUCTO(CODIGO);
ALTER TABLE VENTA_DETALLE ADD FOREIGN KEY (VENTA_ID)	REFERENCES VENTA(ID);